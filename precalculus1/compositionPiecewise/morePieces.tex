\documentclass{ximera}

\input{../../preamble.tex}

\title{More Pieces}

\begin{document}

\begin{abstract}
piecewise linear
\end{abstract}
\maketitle







Let's extend our composition of linear functions to piecewise linear functions.






\[
T(v) = 
\begin{cases}
  2v-1 & \text{ if }  -4 < v \leq -1 \\
  -v+3 & \text{ if } 1 \leq v < 7
\end{cases}
\]





Graph of $y = T(v)$.
\begin{image}
\begin{tikzpicture}
  \begin{axis}[
            domain=-10:10, ymax=10, xmax=10, ymin=-10, xmin=-10,
            axis lines =center, xlabel=$v$, ylabel={$y=T(v)$}, grid = major,
            ytick={-10,-8,-6,-4,-2,2,4,6,8,10},
            xtick={-10,-8,-6,-4,-2,2,4,6,8,10},
            ticklabel style={font=\scriptsize},
            every axis y label/.style={at=(current axis.above origin),anchor=south},
            every axis x label/.style={at=(current axis.right of origin),anchor=west},
            axis on top
          ]
          
	\addplot [draw=penColor,line width=2,smooth,domain=(-4:-1)] {2*x-1};
	\addplot [draw=penColor,line width=2,smooth,domain=(1:7)] {-x+3};
	\addplot[color=penColor,only marks,mark=*] coordinates{(-1,-3)}; 
	\addplot[color=penColor,fill=white,only marks,mark=*] coordinates{(-4,-9)}; 
	\addplot[color=penColor,only marks,mark=*] coordinates{(1,2)}; 
	\addplot[color=penColor,fill=white,only marks,mark=*] coordinates{(7,-4)}; 


    \end{axis}
\end{tikzpicture}
\end{image}





\[
g(x) = 
\begin{cases}
  -2x-3 & \text{ if }  -\frac{3}{2} \leq x \leq 2 \\
  \frac{7}{4}x-8 & \text{ if } 2 < x < 8
\end{cases}
\]

	


\begin{image}
\begin{tikzpicture}
  \begin{axis}[
            domain=-10:10, ymax=10, xmax=10, ymin=-10, xmin=-10,
            axis lines =center, xlabel=$x$, ylabel={$y=g(x)$}, grid = major,
            ytick={-10,-8,-6,-4,-2,2,4,6,8,10},
          	xtick={-10,-8,-6,-4,-2,2,4,6,8,10},
          	yticklabels={$-10$,$-8$,$-6$,$-4$,$-2$,$2$,$4$,$6$,$8$,$10$}, xticklabels={$-10$,$-8$,$-6$,$-4$,$-2$,$2$,$4$,$6$,$8$,$10$},
            ticklabel style={font=\scriptsize},
            every axis y label/.style={at=(current axis.above origin),anchor=south},
            every axis x label/.style={at=(current axis.right of origin),anchor=west},
            axis on top
          ]
          
      		\addplot [line width=2, penColor2, smooth,samples=100,domain=(-1.5:2)] {-2*x-3};
          	\addplot [line width=2, penColor2, smooth,samples=100,domain=(2:8)] {1.75*x-8};




      		\addplot[color=penColor,fill=penColor2,only marks,mark=*] coordinates{(-1.5,0)};
      		\addplot[color=penColor,fill=penColor2,only marks,mark=*] coordinates{(2,-7)};


      		\addplot[color=penColor2,fill=white,only marks,mark=*] coordinates{(2,-4.5)};
      		\addplot[color=penColor2,fill=white,only marks,mark=*] coordinates{(8,6)};


           

  \end{axis}
\end{tikzpicture}
\end{image}






Let's create the composition $T \circ g = T(g)$.


This means the range of $g$ needs to be inside the domain of $T$. But as the chart below shows, there are numbers in
the range of $g$ that are not in the domain of $T$.

For instance, $0$ is in the range of $g$ and not in the domain of $T$. Therefore, we cannot include $-\frac{3}{2}$ in the domain we are constructing.  $-\frac{3}{2}$ is in the domain of $g$, and $g\left(-\frac{3}{2}\right) = 0$, $0$ is not in the domain of $T$.







\begin{image}
	\begin{tikzpicture}
	\begin{axis}[
            domain=-10:10, ymax=2, xmax=10, ymin=-2, xmin=-10,
            %width=3in,
            clip=false,
            axis lines=center,
            %ticks=none,
            %unit vector ratio*=1 1 1,
            ymajorticks=false,
            xtick={-10,-8,-6,-4,-2,2,4,6,8,10},
            %xlabel=$x$, ylabel=$y$,
            %every axis y label/.style={at=(current axis.above origin),anchor=south},
            every axis x label/.style={at=(current axis.right of origin),anchor=west},
          ]      
       
          	\addplot [line width=2, penColor2, smooth,samples=100,domain=(-7:0)] ({x},{1});
          	\addplot [line width=2, penColor2, smooth,samples=100,domain=(-4.5:6)] ({x},{0.5});
          	\node at (axis cs:-7,1) [penColor2] {$[$};
          	\node at (axis cs:0,1) [penColor2] {$]$};
          	\node at (axis cs:-4.5,0.5) [penColor2] {$($};
          	\node at (axis cs:6,0.5) [penColor2] {$)$};
          	\node at (axis cs:5,1.5) [penColor2] {Range of $g$};




          	\addplot [line width=2, penColor, smooth,samples=100,domain=(-4:-1)] ({x},{-0.5});
          	\addplot [line width=2, penColor, smooth,samples=100,domain=(1:7)] ({x},{-0.5});
          	\node at (axis cs:-4,-0.5) [penColor] {$($};
          	\node at (axis cs:-1,-0.5) [penColor] {$]$};
          	\node at (axis cs:1,-0.5) [penColor] {$[$};
          	\node at (axis cs:7,-0.5) [penColor] {$)$};
          	\node at (axis cs:5,-1) [penColor] {Domain of $T$};




    \end{axis}
	\end{tikzpicture}
	\end{image}




We need to map the domain of $T$ back onto the range of $g$, find the intersection, and then work our way back into the domain of $g$, in order to restrict the domain of $g$ to just the numbers that work in the composition.


First, let's map the domain of $T$ back to the range of $g$. We need to see what each piece is doing.  So, we'll plot the domain of $T$ on the vertical axis of the graph of $g$.





\begin{image}
\begin{tikzpicture}
  \begin{axis}[
            domain=-10:10, ymax=10, xmax=10, ymin=-10, xmin=-10,
            axis lines =center, xlabel=$x$, ylabel={$y=g(x)$}, grid = major,
            ytick={-10,-8,-6,-4,-2,2,4,6,8,10},
          	xtick={-10,-8,-6,-4,-2,2,4,6,8,10},
          	yticklabels={$-10$,$-8$,$-6$,$-4$,$-2$,$2$,$4$,$6$,$8$,$10$}, xticklabels={$-10$,$-8$,$-6$,$-4$,$-2$,$2$,$4$,$6$,$8$,$10$},
            ticklabel style={font=\scriptsize},
            every axis y label/.style={at=(current axis.above origin),anchor=south},
            every axis x label/.style={at=(current axis.right of origin),anchor=west},
            axis on top
          ]
          
      		\addplot [line width=2, penColor2, smooth,samples=100,domain=(-1.5:2)] {-2*x-3};
          	\addplot [line width=2, penColor2, smooth,samples=100,domain=(2:8)] {1.75*x-8};
      		\addplot[color=penColor,fill=penColor2,only marks,mark=*] coordinates{(-1.5,0)};
      		\addplot[color=penColor,fill=penColor2,only marks,mark=*] coordinates{(2,-7)};
      		\addplot[color=penColor2,fill=white,only marks,mark=*] coordinates{(2,-4.5)};
      		\addplot[color=penColor2,fill=white,only marks,mark=*] coordinates{(8,6)};

      		\addplot [line width=2, penColor, smooth,samples=100,domain=(-4:-1)] ({0},{x});
      		\addplot [line width=2, penColor, smooth,samples=100,domain=(1:7)] ({0},{x});
      		\node at (axis cs:0,-4) [rotate=90, penColor] {$($};
          	\node at (axis cs:0,-1) [rotate=90, penColor] {$]$};
          	\node at (axis cs:0,1) [rotate=90, penColor] {$[$};
          	\node at (axis cs:0,7) [rotate=90, penColor] {$)$};

          	%\draw[very thick, black] (axis cs:0,0) -- (axis cs:3,5.2) node [pos=.36, above, rotate=60, black] {$\theta=\pi/3$};
           

  \end{axis}
\end{tikzpicture}
\end{image}










\begin{image}
  \begin{tikzpicture}
  \begin{axis}[
            domain=-10:10, ymax=2, xmax=10, ymin=-2, xmin=-10,
            %width=3in,
            clip=false,
            axis lines=center,
            %ticks=none,
            %unit vector ratio*=1 1 1,
            ymajorticks=false,
            xtick={-10,-8,-6,-4,-2,2,4,6,8,10},
            %xlabel=$x$, ylabel=$y$,
            %every axis y label/.style={at=(current axis.above origin),anchor=south},
            every axis x label/.style={at=(current axis.right of origin),anchor=west},
          ]      
       
            \addplot [line width=2, penColor2, smooth,samples=100,domain=(-7:0)] ({x},{1});
            \addplot [line width=2, penColor2, smooth,samples=100,domain=(-4.5:6)] ({x},{0.5});
            \node at (axis cs:-7,1) [penColor2] {$[$};
            \node at (axis cs:0,1) [penColor2] {$]$};
            \node at (axis cs:-4.5,0.5) [penColor2] {$($};
            \node at (axis cs:6,0.5) [penColor2] {$)$};
            \node at (axis cs:5,1.5) [penColor2] {Range of $g$};




            \addplot [line width=2, penColor, smooth,samples=100,domain=(-4:-1)] ({x},{-0.5});
            \addplot [line width=2, penColor, smooth,samples=100,domain=(1:7)] ({x},{-0.5});
            \node at (axis cs:-4,-0.5) [penColor] {$($};
            \node at (axis cs:-1,-0.5) [penColor] {$]$};
            \node at (axis cs:1,-0.5) [penColor] {$[$};
            \node at (axis cs:7,-0.5) [penColor] {$)$};
            \node at (axis cs:5,-1) [penColor] {Domain of $T$};


            \addplot [line width=1, gray, dashed,samples=100,domain=(-1:1)] ({-4},{x});
            \addplot [line width=1, gray, dashed,samples=100,domain=(-1:1)] ({-1},{x});
            \addplot [line width=1, gray, dashed,samples=100,domain=(-1:1)] ({1},{x});
            \addplot [line width=1, gray, dashed,samples=100,domain=(-1:1)] ({6},{x});





    \end{axis}
  \end{tikzpicture}
  \end{image}


The intersection is $(-4, 1] \cup [1, 6)$.


Focusing on the interval endpoints (included or excluded) of this intersection, we need the preimages of $-4$, $-1$, $1$, and $6$ in the domain of $g$.  \\


$g$ has two pieces. 









$\blacktriangleright$ The interval $(-4, 1]$ has a preimage on both pieces. \\
All four endpoint numbers have preimages through $g(x) = \frac{7}{4}x-8$. 







\begin{image}
\begin{tikzpicture}
  \begin{axis}[
            domain=-10:10, ymax=10, xmax=10, ymin=-10, xmin=-10,
            axis lines =center, xlabel=$x$, ylabel={$y=g(x)$}, grid = major,
            ytick={-10,-8,-6,-4,-2,2,4,6,8,10},
            xtick={-10,-8,-6,-4,-2,2,4,6,8,10},
            yticklabels={$-10$,$-8$,$-6$,$-4$,$-2$,$2$,$4$,$6$,$8$,$10$}, xticklabels={$-10$,$-8$,$-6$,$-4$,$-2$,$2$,$4$,$6$,$8$,$10$},
            ticklabel style={font=\scriptsize},
            every axis y label/.style={at=(current axis.above origin),anchor=south},
            every axis x label/.style={at=(current axis.right of origin),anchor=west},
            axis on top
          ]
          
          \addplot [line width=2, penColor2, smooth,samples=100,domain=(-1.5:2)] {-2*x-3};
            \addplot [line width=2, penColor2, smooth,samples=100,domain=(2:8)] {1.75*x-8};
          \addplot[color=penColor,fill=penColor2,only marks,mark=*] coordinates{(-1.5,0)};
          \addplot[color=penColor,fill=penColor2,only marks,mark=*] coordinates{(2,-7)};
          \addplot[color=penColor2,fill=white,only marks,mark=*] coordinates{(2,-4.5)};
          \addplot[color=penColor2,fill=white,only marks,mark=*] coordinates{(8,6)};

          \addplot [line width=2, penColor, smooth,samples=100,domain=(-4:-1)] ({0},{x});
          \addplot [line width=2, penColor, smooth,samples=100,domain=(1:7)] ({0},{x});
          \node at (axis cs:0,-4) [rotate=90, penColor] {$($};
            \node at (axis cs:0,-1) [rotate=90, penColor] {$]$};
            \node at (axis cs:0,1) [rotate=90, penColor] {$[$};
            \node at (axis cs:0,7) [rotate=90, penColor] {$)$};

           \addplot [line width=1, purple, smooth,samples=10,domain=(-1:0)] ({x},{-1});
           \addplot [line width=1, purple, smooth,samples=50,domain=(-1:0)] ({-1},{x});


           \addplot [line width=1, green, smooth,samples=10,domain=(0:0.5)] ({x},{-4});
           \addplot [line width=1, green, smooth,samples=50,domain=(-4:0)] ({0.5},{x});


            %\draw[very thick, black] (axis cs:0,0) -- (axis cs:3,5.2) node [pos=.36, above, rotate=60, black] {$\theta=\pi/3$};
           

  \end{axis}
\end{tikzpicture}
\end{image}


\begin{itemize}
\item $g(x) = -2x-3 = -4$
\begin{itemize}
\item $-2x = -1$
\item $x = \frac{1}{2}$
\end{itemize}
\end{itemize}

\begin{itemize}
\item $g(x) = -2x-3 = -1$
\begin{itemize}
\item $-2x = 2$
\item $x = -1$
\end{itemize}
\end{itemize}


We get the interval $\left[ -1, \frac{1}{2} \right)$.












\begin{image}
\begin{tikzpicture}
  \begin{axis}[
            domain=-10:10, ymax=10, xmax=10, ymin=-10, xmin=-10,
            axis lines =center, xlabel=$x$, ylabel={$y=g(x)$}, grid = major,
            ytick={-10,-8,-6,-4,-2,2,4,6,8,10},
            xtick={-10,-8,-6,-4,-2,2,4,6,8,10},
            yticklabels={$-10$,$-8$,$-6$,$-4$,$-2$,$2$,$4$,$6$,$8$,$10$}, xticklabels={$-10$,$-8$,$-6$,$-4$,$-2$,$2$,$4$,$6$,$8$,$10$},
            ticklabel style={font=\scriptsize},
            every axis y label/.style={at=(current axis.above origin),anchor=south},
            every axis x label/.style={at=(current axis.right of origin),anchor=west},
            axis on top
          ]
          
          \addplot [line width=2, penColor2, smooth,samples=100,domain=(-1.5:2)] {-2*x-3};
            \addplot [line width=2, penColor2, smooth,samples=100,domain=(2:8)] {1.75*x-8};
          \addplot[color=penColor,fill=penColor2,only marks,mark=*] coordinates{(-1.5,0)};
          \addplot[color=penColor,fill=penColor2,only marks,mark=*] coordinates{(2,-7)};
          \addplot[color=penColor2,fill=white,only marks,mark=*] coordinates{(2,-4.5)};
          \addplot[color=penColor2,fill=white,only marks,mark=*] coordinates{(8,6)};

          \addplot [line width=2, penColor, smooth,samples=100,domain=(-4:-1)] ({0},{x});
          \addplot [line width=2, penColor, smooth,samples=100,domain=(1:7)] ({0},{x});
          \node at (axis cs:0,-4) [rotate=90, penColor] {$($};
            \node at (axis cs:0,-1) [rotate=90, penColor] {$]$};
            \node at (axis cs:0,1) [rotate=90, penColor] {$[$};
            \node at (axis cs:0,7) [rotate=90, penColor] {$)$};

           \addplot [line width=1, purple, smooth,samples=10,domain=(0:4)] ({x},{-1});
           \addplot [line width=1, purple, smooth,samples=50,domain=(-1:0)] ({4},{x});


           \addplot [line width=1, green, smooth,samples=10,domain=(0:2.3)] ({x},{-4});
           \addplot [line width=1, green, smooth,samples=50,domain=(-4:0)] ({2.3},{x});


            %\draw[very thick, black] (axis cs:0,0) -- (axis cs:3,5.2) node [pos=.36, above, rotate=60, black] {$\theta=\pi/3$};
           

  \end{axis}
\end{tikzpicture}
\end{image}








\begin{itemize}
\item $g(x) = \frac{7}{4}x -8 = -4$
\begin{itemize}
\item $\frac{7}{4}x = 4$
\item $x = \frac{16}{7} \approx 2.3$
\end{itemize}
\end{itemize}




\begin{itemize}
\item $g(x) = \frac{7}{4}x -8 = -1$
\begin{itemize}
\item $\frac{7}{4}x = 7$
\item $x = 4$
\end{itemize}
\end{itemize}

















$\blacktriangleright$ The interval $[1, 6)$ has a preimage on one piece. \\
Only $-4$ and $-1$ have preimages through $g(x) = -2x-3$.








\begin{image}
\begin{tikzpicture}
  \begin{axis}[
            domain=-10:10, ymax=10, xmax=10, ymin=-10, xmin=-10,
            axis lines =center, xlabel=$x$, ylabel={$y=g(x)$}, grid = major,
            ytick={-10,-8,-6,-4,-2,2,4,6,8,10},
            xtick={-10,-8,-6,-4,-2,2,4,6,8,10},
            yticklabels={$-10$,$-8$,$-6$,$-4$,$-2$,$2$,$4$,$6$,$8$,$10$}, xticklabels={$-10$,$-8$,$-6$,$-4$,$-2$,$2$,$4$,$6$,$8$,$10$},
            ticklabel style={font=\scriptsize},
            every axis y label/.style={at=(current axis.above origin),anchor=south},
            every axis x label/.style={at=(current axis.right of origin),anchor=west},
            axis on top
          ]
          
          \addplot [line width=2, penColor2, smooth,samples=100,domain=(-1.5:2)] {-2*x-3};
            \addplot [line width=2, penColor2, smooth,samples=100,domain=(2:8)] {1.75*x-8};
          \addplot[color=penColor,fill=penColor2,only marks,mark=*] coordinates{(-1.5,0)};
          \addplot[color=penColor,fill=penColor2,only marks,mark=*] coordinates{(2,-7)};
          \addplot[color=penColor2,fill=white,only marks,mark=*] coordinates{(2,-4.5)};
          \addplot[color=penColor2,fill=white,only marks,mark=*] coordinates{(8,6)};

          \addplot [line width=2, penColor, smooth,samples=100,domain=(-4:-1)] ({0},{x});
          \addplot [line width=2, penColor, smooth,samples=100,domain=(1:7)] ({0},{x});
          \node at (axis cs:0,-4) [rotate=90, penColor] {$($};
            \node at (axis cs:0,-1) [rotate=90, penColor] {$]$};
            \node at (axis cs:0,1) [rotate=90, penColor] {$[$};
            \node at (axis cs:0,7) [rotate=90, penColor] {$)$};

           \addplot [line width=1, purple, smooth,samples=10,domain=(0:5.1)] ({x},{1});
           \addplot [line width=1, purple, smooth,samples=50,domain=(1:0)] ({5.1},{x});


           \addplot [line width=1, green, smooth,samples=10,domain=(0:8)] ({x},{6});
           \addplot [line width=1, green, smooth,samples=50,domain=(0:6)] ({8},{x});


            %\draw[very thick, black] (axis cs:0,0) -- (axis cs:3,5.2) node [pos=.36, above, rotate=60, black] {$\theta=\pi/3$};
           

  \end{axis}
\end{tikzpicture}
\end{image}




\begin{itemize}
\item $g(x) = \frac{7}{4}x -8 = 1$
\begin{itemize}
\item $\frac{7}{4}x = 9$
\item $x = \frac{36}{7} \approx 5.1$
\end{itemize}
\end{itemize}

\begin{itemize}
\item $g(x) = \frac{7}{4}x -8 = 6$
\begin{itemize}
\item $\frac{7}{4}x = 14$
\item $x = 8$
\end{itemize}
\end{itemize}











The domain of $T \circ g$ is $\left( -1, \answer{\frac{1}{2}} \right] \cup \left( \frac{16}{7}, \answer{4} \right] \cup \left[ \frac{36}{7}, \answer{8} \right)$ \\


\textbf{Now for the formulas} \\


We have a composition: $T \circ g$.  We know this is a piecewise linear function, because it is the composition of two piecewise linear functions. \\

Our composition has a formula, let's use $c$ for its variable. \\





$\blacktriangleright$ On $\left( -1, \frac{1}{2} \right]$




\begin{itemize}

\item the formula for $g(x)$ is $\answer{-2x-3}$
\item the image of $g(x)$ on $\left( -1, \frac{1}{2} \right]$ is $\left( \answer{-4}, \answer{-1} \right]$
\item On $( -4, -1 ]$, the formula for $T(v) = \answer{2v-1}$  \\
\item $(T \circ g)(c) = -\left(\answer{-2c-3}\right) + 3 = 2c +9$ \\


\end{itemize}








$\blacktriangleright$ On $\left( \frac{16}{7}, \answer{4} \right]$



\begin{itemize}

\item the formula for $g(x)$ is $\answer{\frac{7}{4}x - 8}$
\item the image of $g(x)$ on $\left( \frac{16}{7}, 4 \right]$ is $\left( \answer{-4}, \answer{-1} \right]$
\item On $( -4, -1 ]$, the formula for $T(v) = \answer{2v-1}$  \\
\item $(T \circ g)(c) = 2\left(\answer{\frac{7}{4}c - 8}\right) - 1 = -\frac{7}{2}c - 17$ \\


\end{itemize}












$\blacktriangleright$ On $\left[ \frac{36}{7}, \answer{8} \right)$



\begin{itemize}

\item the formula for $g(x)$ is $\answer{\frac{7}{4}x - 8}$
\item the image of $g(x)$ on $\left[ \frac{36}{7}, 8 \right)$ is $\left[] \answer{1}, \answer{6} \right)$
\item On $[] 1, 6 )$, the formula for $T(v) = \answer{-v + 3}$  \\
\item $(T \circ g)(c) = -\left(\answer{\frac{7}{4}c - 8}\right) + 3 = -\frac{7}{4}c + 11$ \\


\end{itemize}

































\[
T(g(c)) = 
\begin{cases}
  2c +9                &       \text{ on }     \left(-1, \frac{1}{2}\right] \\
  \frac{7}{2}c - 17     &     \text{ on }  \left(\frac{16}{7}, 4\right] \\
  -\frac{7}{4}c + 11   &     \text{ on }  \left[\frac{36}{7}, 8\right)
\end{cases}
\]


  





\end{document}
